# Stream

1. 将要处理的元素集合看作一种流，流在管道中传输，并且可以在管道的节点上进行处理-筛选、排序、聚合

2. stream不存储元素，只进行计算

3. 基础特征：

   1. pipelining：多个操作串联成管道
   2. 内部迭代

4. stream（）创建串行流：以单线程的方式按顺序处理流中的元素，每个元素依次经过流水线上的各个阶段处理

   parallelStream（）创建并行流：多线程同时处理流中的元素，流被拆分为多个子任务并行执行，最后将各个子任务的结果合并得到最终结果

5. forEach：迭代流中的每个数据，对数组中的每个元素依次执行给定的函数

6. map：将函数应用于流中的每一个元素，结果以列表的形式返回

7. filter：根据特定条件从对象集合中过滤出特定元素

8. limit：获取指定数量的流

9. sorted：对流进行排序

10. collectors：将流转换为列表或字符串



# TASK1

## 基础

结果：`limit = java.util.stream.SliceOps$1@4e50df2e`

原因：limit是一个数组，用println函数打印只能打印处limit的地址

解决方法

1. 打印limit数组内容，代码及运行截图：09T101
2. 用lambda表达式，创建一个新的流，将数组的内容作为源导入流，并对数组做获取指定数量并收集的操作，最后打印新的流：09T102

## 进阶

第一题

1. 思路：用过滤的方式过滤出包含Rock子串的genre字符串

2. 问题：

   1. 打印数组时遇到问题，无法调用非静态方法getSongs

      - 创建方法printsongs，通过调用方法打印数组

   2. 报异常：

      Exception in thread "main" java.lang.ClassCastException: class java.util.ImmutableCollections$ListN cannot be cast to class java.util.ArrayList (java.util.ImmutableCollections$ListN and java.util.ArrayList are in module java.base of loader 'bootstrap')
      	at Songs.<init>(Songs.java:31)
      	at Main.main(Main.java:10)

      - 类型不兼容，将Arraylist改为list后解决

   3. 打印出[Song@12edcd21, Song@34c45dca, Song@52cc8049, Song@5b6f7412, ……

      - 打印的是地址，犯了和基础中一样的错误
      - 加入print方法，依次打印列表中的对象

   4. 并没有筛选出含有rock字段的歌曲，而是全部输出了

      - 发现getRock的if设置有问题，永远都会输出true

   5. 成功

第二题

参考资料：[Java HashMap | 菜鸟教程 (runoob.com)](https://www.runoob.com/java/java-hashmap.html#:~:text=HashMap 是一)

[Java HashMap putIfAbsent() 方法 | 菜鸟教程 (runoob.com)](https://www.runoob.com/java/java-hashmap-putifabsent.html#:~:text=putIfAbsen)

思路：用putIfAbsent方法实现

遇到的问题：将genre作为key值后，绑定的value值不知道该返回，返回了空字符串

# TASK2

## I/O流

1. 控制台输入：System.in
2. 创建字符流：将System.in包装在BufferedReader对象中
3. 读取一个字符：read；流结束返回-1
4. 读取字符串：readLine
5. 字节流-处理二进制数据
6. 字符流-处理文本数据
7. 辅助类-对文件、目录、随机文件访问的支持
8. FileInputStream可创建输入流对象，之后可读取流或进行其它流操作
9. FileOutputStream:创建文件并写数据
10. 创建目录：mkdir/mkdirs
11. 删除文件：java.io.File.delete()

任务：

1. 我没太理解这里的串行化要求，是要求仅保存文件状态吗？还是同时保存数据状态，而且要求在文档中能够体现？

2. 将数据导入文档并体现见09T201图片与代码包，导出文档见song.txt

3. 仅保存文件状态并成功回传见09T202图片与代码包，其中song.txt乱码无法体现数据

4. 参考[Java 流(Stream)、文件(File)和IO | 菜鸟教程 (runoob.com)](https://www.runoob.com/java/java-files-io.html)，试着直接调用数组

   失败：无法解析方法 'append(List<Song>)'

5. 参考[数组的串行化与反串行化_数组串行请求-CSDN博客](https://blog.csdn.net/jingshui1234/article/details/39429747)、[Java串行化接口详解_mb6561aa5ce8265的技术博客_51CTO博客](https://blog.51cto.com/u_16381958/8561438)，将数组转化为字符串

6. 提示没有抛出异常，根据编译器提示用trycatch包围

7. 反复报错，append不能应用于数组？推翻重来

8. 参考[Java 对象的串行化（Serialization） - 笑哼 - 博客园 (cnblogs.com)](https://www.cnblogs.com/xh0102/p/5759803.html)，得出最终代码

## 进阶挑战

问题：写入文件成功，但是读取失败

解决：参考[Java FileWriter类 | 菜鸟教程 (runoob.com)](https://www.runoob.com/java/java-filewriter.html)，成功输出字符串

成功截图及代码已上传，输出文件在压缩包内

遗留问题：读取出来的是字符串，并不是原有对象数组，这样算完成要求吗？要怎样实现自动转化为对象数组？

我的思路：按格式分割字符串并一个个传入对象数组字段，但是这样并不是逆串行化的结果，而是人为再分